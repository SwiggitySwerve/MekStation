# heat-management-system Specification

## Purpose
Defines heat generation, dissipation, and management rules for BattleMech units.

## Requirements

### Requirement: Heat Generation
The system SHALL track heat generated by weapons and movement.

#### Scenario: Weapon heat
- **WHEN** weapons are fired
- **THEN** heat generated SHALL equal sum of weapon heat values
- **AND** heat values SHALL be looked up from equipment registry
- **AND** heat SHALL accumulate each turn

#### Scenario: Movement heat
- **WHEN** mech moves
- **THEN** running SHALL generate 2 heat
- **AND** jumping SHALL generate 1 heat per jump MP used
- **AND** walking generates 0 additional heat

#### Scenario: Alpha strike heat
- **WHEN** all weapons are fired simultaneously
- **THEN** alpha strike heat SHALL equal total heat from all weapons
- **AND** alpha strike heat is used for BV heat adjustment calculation

### Requirement: Heat Dissipation
The system SHALL calculate heat dissipation from heat sinks.

#### Scenario: Heat sink dissipation
- **WHEN** calculating heat dissipation
- **THEN** single heat sinks dissipate 1 heat each
- **AND** double heat sinks dissipate 2 heat each
- **AND** total dissipation = heat sink count Ã— dissipation per sink

#### Scenario: Net heat calculation
- **WHEN** calculating net heat
- **THEN** net heat SHALL equal heat generated minus heat dissipated
- **AND** negative net heat indicates heat neutral or better

### Requirement: Heat Effects
Excess heat SHALL cause negative effects.

#### Scenario: Heat scale
- **WHEN** heat exceeds dissipation
- **THEN** movement penalties SHALL apply at thresholds
- **AND** shutdown risk SHALL increase with heat level

### Requirement: Registry-Based Heat Lookup
Heat calculation SHALL use equipment registry for weapon heat values.

#### Scenario: Equipment registry lookup for heat
- **WHEN** calculating heat from equipment
- **THEN** each equipment item SHALL be looked up in registry
- **AND** heat value SHALL be extracted from registry data
- **AND** items without heat property SHALL contribute 0 heat

#### Scenario: Registry not initialized
- **WHEN** equipment registry is not ready
- **THEN** heat profile SHALL return default values
- **AND** heat generated SHALL be 0 until registry loads
- **AND** heat dissipation SHALL still be calculated from heat sink count
