# heat-management-system Specification

## Purpose
Defines heat generation, dissipation, and management rules for BattleMech units.
## Requirements
### Requirement: Heat Generation
The system SHALL track heat generated by weapons and movement.

#### Scenario: Weapon heat
- **WHEN** weapons are fired
- **THEN** heat generated SHALL equal sum of weapon heat values
- **AND** heat values SHALL be looked up from equipment registry
- **AND** heat SHALL accumulate each turn

#### Scenario: Movement heat
- **WHEN** mech moves
- **THEN** running SHALL generate 2 heat
- **AND** jumping SHALL generate 1 heat per jump MP used
- **AND** walking generates 0 additional heat

#### Scenario: Alpha strike heat
- **WHEN** all weapons are fired simultaneously
- **THEN** alpha strike heat SHALL equal total heat from all weapons
- **AND** alpha strike heat is used for BV heat adjustment calculation

### Requirement: Heat Dissipation
The system SHALL calculate heat dissipation from heat sinks.

#### Scenario: Heat sink dissipation
- **WHEN** calculating heat dissipation
- **THEN** single heat sinks dissipate 1 heat each
- **AND** double heat sinks dissipate 2 heat each
- **AND** total dissipation = heat sink count Ã— dissipation per sink

#### Scenario: Net heat calculation
- **WHEN** calculating net heat
- **THEN** net heat SHALL equal heat generated minus heat dissipated
- **AND** negative net heat indicates heat neutral or better

### Requirement: Heat Effects
Excess heat SHALL cause negative effects.

#### Scenario: Heat scale
- **WHEN** heat exceeds dissipation
- **THEN** movement penalties SHALL apply at thresholds
- **AND** shutdown risk SHALL increase with heat level

### Requirement: Registry-Based Heat Lookup
Heat calculation SHALL use equipment registry for weapon heat values.

#### Scenario: Equipment registry lookup for heat
- **WHEN** calculating heat from equipment
- **THEN** each equipment item SHALL be looked up in registry
- **AND** heat value SHALL be extracted from registry data
- **AND** items without heat property SHALL contribute 0 heat

#### Scenario: Registry not initialized
- **WHEN** equipment registry is not ready
- **THEN** heat profile SHALL return default values
- **AND** heat generated SHALL be 0 until registry loads
- **AND** heat dissipation SHALL still be calculated from heat sink count

### Requirement: Maximum Heat Display
The system SHALL calculate and display the maximum possible heat generation for UI purposes.

#### Scenario: Heat generated includes movement
- **WHEN** calculating heatGenerated for display
- **THEN** total SHALL include weapon heat plus worst-case movement heat
- **AND** movement heat = max(runningHeat, jumpingHeat)
- **AND** runningHeat = 2
- **AND** jumpingHeat = number of jump jets

#### Scenario: Running vs jumping heat selection
- **WHEN** mech has fewer than 3 jump jets
- **THEN** movement heat SHALL be 2 (running is worse)
- **AND** when mech has 3 or more jump jets
- **THEN** movement heat SHALL equal jump MP (jumping is worse)

#### Scenario: Alpha strike heat tracking
- **WHEN** calculating heat profile
- **THEN** alphaStrikeHeat SHALL track weapon-only heat separately
- **AND** heatGenerated SHALL include weapons + movement
- **AND** netHeat = heatGenerated - heatDissipated

#### Scenario: Heat profile with no weapons
- **WHEN** mech has no weapons and no jump jets
- **THEN** heatGenerated SHALL be 2 (running heat only)
- **AND** alphaStrikeHeat SHALL be 0

#### Scenario: Heat profile with 5 jump jets
- **WHEN** mech has 5 jump jets and no weapons
- **THEN** heatGenerated SHALL be 5 (jump heat > running heat)
- **AND** alphaStrikeHeat SHALL be 0

